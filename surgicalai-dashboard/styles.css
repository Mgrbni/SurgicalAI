:root{
  --bg:#0d0f12;
  --panel:#12151a;
  --panel-2:#171b22;
  --text:#e8eef7;
  --muted:#9ba7b6;
  --line:#232a35;
  --accent:#6ee7ff;
  --accent-2:#a78bfa;
  --good:#8dd47e;
  --warn:#ffcc66;
  --bad:#ff7a7a;
  --radius:14px;
  --shadow:0 10px 24px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:linear-gradient(180deg, #0b0d10, #0f1318);
  color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}

.app{display:grid; grid-template-columns:280px 1fr; min-height:100vh}

/* Sidebar */
.sidebar{
  background:linear-gradient(180deg, #0d1117, #0b0e12);
  border-right:1px solid var(--line);
  padding:20px; display:flex; flex-direction:column; gap:20px;
}
.brand{display:flex; gap:12px; align-items:center}
.brand-mark{
  width:44px; height:44px; border-radius:12px; background:
  radial-gradient(120% 120% at 20% 20%, var(--accent), transparent),
  radial-gradient(120% 120% at 80% 30%, var(--accent-2), transparent),
  #0b0f14;
  display:grid; place-items:center; font-weight:800; color:#02131a; box-shadow:var(--shadow)
}
.brand-title{font-weight:800; letter-spacing:.2px}
.brand-sub{color:var(--muted); font-size:12px}

.nav{display:flex; flex-direction:column; gap:6px}
.nav-item{
  background:transparent; color:var(--text); border:none; text-align:left;
  padding:12px 14px; border-radius:10px; cursor:pointer; display:flex; gap:10px; align-items:center;
}
.nav-item:hover{background:var(--panel)}
.nav-item.active{background:linear-gradient(90deg, rgba(110,231,255,.12), transparent); border:1px solid rgba(110,231,255,.25)}
.icon{width:18px; text-align:center}

.sidebar-footer{margin-top:auto; display:flex; flex-direction:column; gap:10px}
.watermark{color:var(--muted); font-size:11px; opacity:.8; text-align:center}

/* Main */
.main{display:flex; flex-direction:column; min-width:0}
.topbar{
  display:flex; justify-content:space-between; align-items:center;
  padding:16px 22px; border-bottom:1px solid var(--line); background:rgba(16,20,26,.6); backdrop-filter: blur(8px);
  position:sticky; top:0; z-index:10;
}
.search input{
  width:340px; max-width:50vw; padding:10px 12px; border-radius:10px; background:var(--panel); color:var(--text);
  border:1px solid var(--line)
}
.top-actions{display:flex; align-items:center; gap:12px}
.user-chip{display:flex; gap:10px; align-items:center; background:var(--panel); padding:8px 10px; border-radius:12px; border:1px solid var(--line)}
.avatar{width:32px; height:32px; border-radius:10px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); display:grid; place-items:center; font-weight:800; color:#02131a}
.user-name{font-weight:700; font-size:14px}
.user-role{font-size:12px; color:var(--muted)}

/* Sections */
.section{display:none; padding:20px; animation:fade .3s ease}
.section.visible{display:block}
@keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}

.grid-3{display:grid; grid-template-columns:repeat(3,1fr); gap:16px}
.grid-2{display:grid; grid-template-columns:repeat(2,1fr); gap:16px}
@media (max-width:1100px){.grid-3{grid-template-columns:1fr} .grid-2{grid-template-columns:1fr}}
.card{
  background:linear-gradient(180deg, #12161d, #0f1217);
  border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow);
  padding:16px; display:flex; flex-direction:column; gap:14px; min-height:60px;
}
.card.full{grid-column:1/-1}
.card-head{display:flex; justify-content:space-between; align-items:center}
.card-head h3{margin:0}

.btn{background:linear-gradient(90deg, rgba(110,231,255,.18), rgba(167,139,250,.18));
  border:1px solid rgba(110,231,255,.35); color:var(--text); padding:8px 12px; border-radius:10px; cursor:pointer}
.btn:hover{filter:brightness(1.1)}
.btn-outline{background:transparent; border:1px solid var(--line)}
.btn-ghost{background:transparent; border:1px dashed var(--line)}
.toggle{display:flex; align-items:center; gap:8px}
.toggle input{transform:scale(1.2)}

.list{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px}
.list li{padding:10px; background:var(--panel); border:1px solid var(--line); border-radius:10px}

.kpis{list-style:none; margin:0; padding:0; display:grid; grid-template-columns:repeat(2,1fr); gap:10px}
.kpis li{display:flex; justify-content:space-between; padding:10px; background:var(--panel); border:1px solid var(--line); border-radius:10px}

.uploader{
  border:2px dashed rgba(110,231,255,.35); border-radius:14px; background:rgba(110,231,255,.06); padding:18px; outline:none
}
.uploader:focus{box-shadow:0 0 0 3px rgba(110,231,255,.25)}
.uploader-inner{display:grid; place-items:center; gap:8px; text-align:center}
.big-icon{font-size:32px}

.preview{display:grid; grid-template-columns:2fr 1fr; gap:12px}
#viewport{
  width:100%; height:380px; background:
    radial-gradient(1200px 380px at 30% 10%, rgba(110,231,255,.1), transparent),
    radial-gradient(900px 380px at 80% 0%, rgba(167,139,250,.08), transparent),
    #0c0f13;
  border:1px solid var(--line); border-radius:12px;
}
.pipeline{display:flex; gap:8px; align-items:center; overflow:auto}
.pipe-step{padding:6px 10px; border:1px solid var(--line); border-radius:999px; background:var(--panel-2); font-size:12px; color:var(--muted)}
.pipe-step.done{border-color:rgba(141,212,126,.5); color:#bff0b4}

.probabilities{display:flex; flex-direction:column; gap:10px}
.prob-row{display:flex; align-items:center; gap:8px}
.prob-label{width:140px}
.prob-bar{flex:1; height:10px; border-radius:999px; background:#12161d; border:1px solid var(--line); overflow:hidden}
.prob-bar > span{display:block; height:100%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); width:0%}

.heatmap, .plan-view{min-height:260px; background:#0c0f13; border:1px solid var(--line); border-radius:12px; padding:8px}
#heatmap-canvas{width:100%; height:240px}

.flap-config{display:grid; grid-template-columns:repeat(4,1fr); gap:10px}
.flap-config label{display:flex; flex-direction:column; gap:6px}
.flap-config input, .form input, .form select, .form textarea{
  background:var(--panel); color:var(--text); border:1px solid var(--line); border-radius:10px; padding:8px
}

.checks{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px}
.checks li{display:flex; align-items:center; gap:10px; padding:10px; background:var(--panel); border:1px solid var(--line); border-radius:10px}
.checks .ok{color:var(--good)} .checks .warn{color:var(--warn)} .checks .bad{color:var(--bad)}

.table-wrap{overflow:auto}
.table{width:100%; border-collapse:collapse; font-size:14px}
.table th, .table td{border-bottom:1px solid var(--line); padding:10px; text-align:left}
.table tr:hover{background:#0f1217}

.form{display:flex; flex-direction:column; gap:12px}
.code{background:#0b0f14; border:1px solid var(--line); border-radius:12px; padding:10px; overflow:auto}
.small{font-size:12px}
.muted{color:var(--muted)}
.tiny{font-size:12px}

.qs{margin:0 0 0 18px; padding:0; display:flex; flex-direction:column; gap:10px}

.clinic{display:flex; flex-direction:column; gap:6px}
.clinic-name{font-weight:800; font-size:18px}
.clinic-role{color:var(--muted)}

.footer{
  margin-top:auto; padding:12px 20px; border-top:1px solid var(--line);
  display:flex; justify-content:space-between; align-items:center; color:var(--muted); font-size:13px
}

/* Modal */
dialog{border:none; padding:0; background:transparent}
.modal{background:#0f1318; border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow); padding:18px; min-width:320px}
.modal-actions{display:flex; justify-content:flex-end; margin-top:12px}

/* Responsive tweaks */
@media (max-width:900px){
  .app{grid-template-columns:1fr}
  .sidebar{position:sticky; top:0; z-index:20}
  .preview{grid-template-columns:1fr}
  .flap-config{grid-template-columns:1fr 1fr}
}

